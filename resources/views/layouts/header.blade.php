<header class="header">
    <div class="container">
        @php $currentCity = app('currentCity'); @endphp
            <form class="searchPlatform" action="{{ city_route('pages.city.get', ['slug' => 'search']) }}" method="get">
            <input type="text" placeholder="{{__("Поисковый запрос")}}" name="query">
            <button type="submit" class="search">
                <svg width="30" height="31" viewBox="0 0 30 31" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M20.0044 3.92754C23.7087 7.63184 24.4101 13.2188 22.1097 17.6366L28.9717 24.4985C30.3428 25.8696 30.3428 28.1005 28.9717 29.4716C27.6006 30.8426 25.3697 30.8427 23.9987 29.4716L19.8195 25.2925C19.3617 24.8347 19.3617 24.0926 19.8195 23.6348C20.2773 23.1771 21.0194 23.1771 21.4772 23.6348L25.6563 27.8139C26.1133 28.2709 26.857 28.2709 27.3139 27.8139C27.771 27.3569 27.771 26.6133 27.3139 26.1563L20.7919 19.6342C20.5464 19.9341 20.2841 20.2246 20.0044 20.5044C15.4341 25.0746 7.99783 25.0746 3.42755 20.5044C-1.14262 15.9341 -1.14262 8.49783 3.42755 3.9276C7.99789 -0.642686 15.4341 -0.642686 20.0044 3.92754ZM5.08532 18.8467C8.74145 22.5027 14.6906 22.5028 18.3467 18.8467C22.0028 15.1905 22.0028 9.24144 18.3467 5.58526C14.6905 1.92914 8.74139 1.92908 5.08532 5.58526C1.4292 9.24138 1.4292 15.1904 5.08532 18.8467Z" fill="#3B3535"></path>
                    <path d="M16.6891 7.24288C17.1469 7.70067 17.1469 8.44281 16.6892 8.90054C16.2313 9.35832 15.4892 9.35832 15.0315 8.90054C13.2034 7.07251 10.2289 7.07251 8.40069 8.90054C7.94291 9.35832 7.20076 9.35832 6.74303 8.90054C6.2853 8.44276 6.2853 7.70061 6.74309 7.24288C9.48517 4.50075 13.947 4.50075 16.6891 7.24288Z" fill="#3B3535"></path>
                </svg>
            </button>
        </form>
        <div class="header_left">
            <div class="mobileMenuBtn">
                <div class="icon icon_menu active" onclick="openMobileMenu()">
                    <img src="{{ asset('images/icons/mMenu.svg') }}" alt="menu icon"></div>
                <div class="icon icon_close" onclick="closeMobileMenu()">
                    <img src="{{ asset('images/icons/mMenu_close.svg') }}" alt="menu close icon">
                </div>
            </div>
            <div class="menu">

                    @if($categories)
                    <div class="menu_link">
                        <a class="menu_link" href="{{ city_route('pages.city.get', ['slug' => 'catalog']) }}">{{ __("Каталог") }}</a>
                        <div class="dropdown">
                            <div class="dropdown_inner">
                                @foreach($categories as $slug => $name)
                                    <a class="dropdown_link" href="{{ city_route('category.city.show', ['slug' => $slug]) }}">{{ $name }}</a>
                                @endforeach
                            </div>
                        </div>
                    </div>
                @else
                    <a class="menu_link" href="{{ city_route('pages.city.get', ['slug' => 'catalog']) }}">{{ __("Каталог") }}</a>
                @endif
                <a class="menu_link" href="{{ city_route( 'calculator.city') }}">{{__("Калькулятор")}}</a>
                <a class="menu_link" href="{{ city_route( 'about.city') }}">{{__("О компании")}}</a>
                <a class="menu_link" href="{{ city_route('pages.city.get', ['slug' => 'articles']) }}">{{__("Статьи")}}</a>
                <a class="menu_link" href="{{ city_route('contacts.city') }}">{{__("Контакты")}}</a>
            </div>
        </div>
        <div class="header_center">
            @if(\Illuminate\Support\Facades\URL::current() != url('/'))
                <a href="/"><img class="logo" src="{{ $generalSettings->getRealFormat('logo_fixed') }}" alt="logo"></a>
            @else
                <img class="logo" src="{{ $generalSettings->getRealFormat('logo_fixed') }}" alt="logo">
            @endif
        </div>
        <div class="header_right">
            <a class="tel" href="tel:+{{ $generalSettings->getPhone() }}">
                <svg class="icon" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M19.9981 16.1154C19.9702 15.3417 19.648 14.6198 19.0907 14.0825C17.9997 13.0304 17.0855 12.423 16.2139 12.1712C15.0129 11.8241 13.9004 12.1397 12.9076 13.1093C12.9061 13.1107 12.9046 13.1122 12.9031 13.1137L11.8469 14.1621C11.1868 13.79 9.90316 12.9729 8.51636 11.5861L8.41355 11.4834C7.02651 10.0964 6.20951 8.81256 5.83775 8.15318L6.8862 7.09689C6.88768 7.09541 6.88917 7.09392 6.89065 7.0924C7.86022 6.09966 8.17585 4.98723 7.82878 3.78609C7.57686 2.91449 6.96956 2.00034 5.91744 0.909282C5.38017 0.352131 4.65826 0.0298633 3.88462 0.00197252C3.11051 -0.0259573 2.3677 0.243497 1.7916 0.760609L1.76918 0.780765C1.75879 0.790101 1.74863 0.79975 1.73871 0.809633C0.59187 1.95647 -0.00930522 3.56199 0.00010889 5.45266C0.0161637 8.66448 1.78137 12.3375 4.72197 15.278C5.27646 15.8325 5.90666 16.3813 6.59502 16.9091C6.93741 17.1716 7.4278 17.1069 7.69034 16.7645C7.95292 16.4221 7.88815 15.9317 7.54573 15.6691C6.91155 15.1828 6.33323 14.6795 5.82682 14.1733C3.17071 11.5171 1.5766 8.25424 1.56258 5.44489C1.55535 3.98879 1.99336 2.77343 2.82942 1.92866L2.8354 1.92327C3.40325 1.41354 4.26298 1.44456 4.79275 1.9939C6.81538 4.09148 6.66893 5.08176 5.77518 5.99825L4.32697 7.45732C4.09986 7.68615 4.03661 8.031 4.16775 8.32553C4.2045 8.40811 5.09392 10.3735 7.30897 12.5885L7.41182 12.6912C9.6266 14.906 11.592 15.7954 11.6746 15.8322C11.969 15.9634 12.314 15.9001 12.5427 15.673L14.0019 14.2247C14.9185 13.3309 15.9087 13.1846 18.0062 15.2072C18.5556 15.7369 18.5866 16.5967 18.077 17.1644L18.0714 17.1706C17.2336 17.9998 16.0311 18.4375 14.5909 18.4375C14.579 18.4375 14.5671 18.4375 14.5552 18.4374C13.404 18.4317 12.0709 18.1161 10.7002 17.5248C10.3041 17.3539 9.84426 17.5366 9.6734 17.9328C9.5025 18.329 9.68512 18.7887 10.0813 18.9596C11.6658 19.643 13.1684 19.993 14.5474 19.9999C14.5621 20 14.5766 20 14.5913 20C16.4629 20 18.0525 19.3993 19.1905 18.2613C19.2004 18.2514 19.21 18.2413 19.2193 18.2309L19.2396 18.2083C19.7567 17.6323 20.0261 16.889 19.9981 16.1154Z" fill="#3B3535"></path>
                </svg>
                <div class="text">{{ $generalSettings->phone }}</div>
            </a>
            <div class="btn" onclick="showModal(1)">{{__("Заказать звонок")}}</div>
            <div class="extraIcon" onclick="openCustomModal()">
                {{-- <svg xmlns="http://www.w3.org/2000/svg" width="26" height="26" viewBox="0 0 24 24">
                    <path d="m12,16.791l4.949-4.841c1.322-1.322,2.051-3.08,2.051-4.95s-.729-3.627-2.051-4.95c-1.321-1.322-3.079-2.05-4.949-2.05s-3.628.728-4.95,2.05c-2.729,2.729-2.729,7.17.004,9.903l4.946,4.837ZM7.757,2.757c1.134-1.133,2.641-1.757,4.243-1.757s3.109.624,4.242,1.757c1.134,1.133,1.758,2.64,1.758,4.243s-.624,3.109-1.754,4.239l-4.246,4.154-4.243-4.15c-2.339-2.339-2.339-6.146,0-8.485Zm4.243,7.223c1.648,0,2.99-1.341,2.99-2.99s-1.342-2.99-2.99-2.99-2.99,1.341-2.99,2.99,1.342,2.99,2.99,2.99Zm0-4.98c1.098,0,1.99.893,1.99,1.99s-.893,1.99-1.99,1.99-1.99-.893-1.99-1.99.893-1.99,1.99-1.99Zm11.943,11.846l-11.943,7.166L.057,16.846l5.664-3.398h0l.783.766-4.503,2.632,10,6,10-6-4.482-2.654.761-.744,5.665,3.399Z"/>
                </svg> --}}
                <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:xodm="http://www.corel.com/coreldraw/odm/2003" xml:space="preserve" width="26" height="26" version="1.1" style="shape-rendering:geometricPrecision; text-rendering:geometricPrecision; image-rendering:optimizeQuality; fill-rule:evenodd; clip-rule:evenodd" viewBox="0 0 13803.29 13584.13">

  <path class="fil0" d="M10513.22 4643.98c0,1122.52 -376.16,1859.27 -968.59,2651.31l-1334.25 1556.27c-67.49,65.95 -80.16,80.06 -139.83,157.32 -190.43,224.35 -970.8,1221.19 -1168.89,1474.41 -198.09,-253.22 -978.47,-1250.07 -1168.89,-1474.41 -59.68,-77.26 -72.35,-91.37 -139.83,-157.32l-1334.25 -1556.27c-592.43,-792.04 -968.59,-1528.79 -968.59,-2651.31 0,-1256.48 724.84,-2417.02 1801.4,-3061.14 526.48,-315.01 1170.15,-485.92 1810.17,-494.66 640.02,8.74 1283.69,179.65 1810.17,494.66 1076.56,644.13 1801.4,1804.67 1801.4,3061.14zm-3611.57 7148.75c261.84,-20.98 529.79,-257.01 855.94,-719.38 1208.94,-1713.9 3281.5,-3188.72 3739.38,-5310.55 223.82,-1037.17 100.14,-1851.27 -216.75,-2777.28 -138.72,-405.41 -463.35,-886.72 -716.63,-1228.4 -313.94,-423.5 -945.93,-934.31 -1409.94,-1183.41 -420.93,-225.97 -951,-430.63 -1437.98,-507.05 -265.19,-41.62 -539.07,-64.64 -814.02,-66.65 -274.96,2.01 -548.84,25.04 -814.02,66.65 -486.98,76.42 -1017.05,281.08 -1437.98,507.05 -464.01,249.1 -1096,759.91 -1409.94,1183.41 -253.28,341.68 -577.9,822.98 -716.63,1228.4 -316.89,926.02 -440.57,1740.12 -216.75,2777.28 457.88,2121.83 2530.44,3596.65 3739.38,5310.55 326.15,462.36 594.1,698.4 855.94,719.38zm-2255.37 -5779.88c184.43,343.73 426.18,590.67 724.13,815.68 407.79,307.94 1325.86,652.16 1753.19,463.73 474.94,-209.43 407.32,-893.96 -60.92,-1021.41 -132,-35.92 -239.99,-20.18 -388.98,-43.25 -143.73,-22.26 -236.68,-58.66 -354.15,-105.09 -909.13,-359.37 -1179.84,-1532.32 -617.97,-2278.33 650.58,-863.79 1963.53,-787.88 2503.67,149.5 314.23,545.31 91.28,890.5 383.07,1156.75 284.21,259.35 911.65,179.16 911.65,-479.43 0,-345.08 -111.23,-747.51 -224.79,-990.85 -1459.48,-3127.52 -6368.12,-908.98 -4628.91,2332.7zm-4646.28 6274.6c0,684.31 559.19,1296.68 1242.65,1296.68l5659 0 5659 0c683.46,0 1242.65,-612.37 1242.65,-1296.68 0,-360.7 -262.26,-795.08 -396.21,-1062.56 -86.29,-172.29 -147.84,-322.98 -234.12,-495.27 -412.24,-823.14 -721.63,-1845.96 -1773.93,-1845.96 -465.04,0 -837.76,-74.76 -1028.4,295.33 -100.05,194.24 -73.86,438.97 55.02,597 352.17,431.83 988.49,3.95 1228.63,365.22l798.3 1605.96c76.85,153.7 484.97,756.4 27.01,756.4l-5577.95 0 -5577.95 0c-457.96,0 -49.84,-602.69 27.01,-756.4l798.3 -1605.96c240.14,-361.26 876.46,66.62 1228.63,-365.22 128.88,-158.03 155.07,-402.76 55.02,-597 -190.64,-370.09 -563.36,-295.33 -1028.4,-295.33 -1052.3,0 -1361.69,1022.83 -1773.93,1845.96 -86.28,172.29 -147.83,322.98 -234.12,495.27 -133.95,267.47 -396.21,701.86 -396.21,1062.56z"/>

</svg>
                    <div class="cityName">
                        {{ $currentCity->name ?? 'Павлодар' }}
                    </div>
            </div>
            <div class="searchBtn" onclick="closeMobileMenu();openSearch()">
                <svg width="30" height="31" viewBox="0 0 30 31" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M20.0044 3.92754C23.7087 7.63184 24.4101 13.2188 22.1097 17.6366L28.9717 24.4985C30.3428 25.8696 30.3428 28.1005 28.9717 29.4716C27.6006 30.8426 25.3697 30.8427 23.9987 29.4716L19.8195 25.2925C19.3617 24.8347 19.3617 24.0926 19.8195 23.6348C20.2773 23.1771 21.0194 23.1771 21.4772 23.6348L25.6563 27.8139C26.1133 28.2709 26.857 28.2709 27.3139 27.8139C27.771 27.3569 27.771 26.6133 27.3139 26.1563L20.7919 19.6342C20.5464 19.9341 20.2841 20.2246 20.0044 20.5044C15.4341 25.0746 7.99783 25.0746 3.42755 20.5044C-1.14262 15.9341 -1.14262 8.49783 3.42755 3.9276C7.99789 -0.642686 15.4341 -0.642686 20.0044 3.92754ZM5.08532 18.8467C8.74145 22.5027 14.6906 22.5028 18.3467 18.8467C22.0028 15.1905 22.0028 9.24144 18.3467 5.58526C14.6905 1.92914 8.74139 1.92908 5.08532 5.58526C1.4292 9.24138 1.4292 15.1904 5.08532 18.8467Z" fill="#3B3535"></path>
                    <path d="M16.6891 7.24288C17.1469 7.70067 17.1469 8.44281 16.6892 8.90054C16.2313 9.35832 15.4892 9.35832 15.0315 8.90054C13.2034 7.07251 10.2289 7.07251 8.40069 8.90054C7.94291 9.35832 7.20076 9.35832 6.74303 8.90054C6.2853 8.44276 6.2853 7.70061 6.74309 7.24288C9.48517 4.50075 13.947 4.50075 16.6891 7.24288Z" fill="#3B3535"></path>
                </svg>
            </div>
            <a href="{{ city_route('pages.city.get', ['slug' => 'cart']) }}" class="basketBtn">
                <svg width="30" height="31" viewBox="0 0 30 31" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M30 10.1092V14.7967C30 15.444 29.4754 15.9686 28.8281 15.9686H28.0575L27.5638 20.3624C27.4965 20.9612 26.9893 21.4034 26.4006 21.4036C26.3569 21.4036 26.3129 21.4011 26.2683 21.396C25.6251 21.3239 25.1623 20.7437 25.2346 20.1008L25.8453 14.666C25.9119 14.0732 26.4132 13.6248 27.0099 13.6248H27.6565V11.281H2.34377V13.6248H22.3244C22.9717 13.6248 23.4963 14.1496 23.4963 14.7967C23.4963 15.444 22.9717 15.9686 22.3244 15.9686H4.3227L5.47993 25.6226C5.62092 26.7997 6.62137 27.6873 7.80699 27.6873H22.2871C23.4814 27.6873 24.4828 26.7922 24.6162 25.6052C24.6883 24.962 25.2683 24.4994 25.9115 24.5715C26.5546 24.6439 27.0174 25.2239 26.9453 25.867C26.6784 28.2408 24.6759 30.0311 22.2871 30.0311H7.80699C5.43576 30.0311 3.43486 28.2556 3.15264 25.9013L1.96222 15.9686H1.17188C0.524601 15.9686 0 15.444 0 14.7967V10.1092C0 9.46189 0.524601 8.9373 1.17188 8.9373H5.32841L11.5209 0.509171C11.904 -0.012222 12.6373 -0.124603 13.159 0.258774C13.6806 0.641923 13.7928 1.37526 13.4096 1.89688L8.23683 8.9373H21.8067L16.6337 1.89688C16.2505 1.37526 16.3627 0.641923 16.8843 0.258774C17.4059 -0.124603 18.1393 -0.012451 18.5226 0.509171L24.7148 8.9373H28.8281C29.4754 8.9373 30 9.46212 30 10.1092ZM13.8282 19.4842V24.1717C13.8282 24.819 14.3528 25.3436 15.0001 25.3436C15.6472 25.3436 16.172 24.819 16.172 24.1717V19.4842C16.172 18.8369 15.6472 18.3123 15.0001 18.3123C14.3528 18.3123 13.8282 18.8369 13.8282 19.4842ZM18.5158 19.4842V24.1717C18.5158 24.819 19.0404 25.3436 19.6877 25.3436C20.3347 25.3436 20.8595 24.819 20.8595 24.1717V19.4842C20.8595 18.8369 20.3347 18.3123 19.6877 18.3123C19.0404 18.3123 18.5158 18.8369 18.5158 19.4842ZM9.14069 19.4842V24.1717C9.14069 24.819 9.6653 25.3436 10.3126 25.3436C10.9596 25.3436 11.4845 24.819 11.4845 24.1717V19.4842C11.4845 18.8369 10.9596 18.3123 10.3126 18.3123C9.6653 18.3123 9.14069 18.8369 9.14069 19.4842Z" fill="#3B3535"></path>
                </svg>
                <div class="num" style="display: {{ $cartCount > 0 ? 'block' : 'none' }}">{{ $cartCount > 9 ? '9+' : $cartCount }}</div>
            </a>

            @php($isQuest = auth()->guard('site')->guest())
            <div class="profileBtn questProfileBtn" onclick="showModal(2)" style="display: {{ $isQuest ? 'flex' : 'none' }}">
                <svg width="30" height="31" viewBox="0 0 30 31" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M28.8831 9.84022C27.3714 6.13209 24.506 3.23456 20.8149 1.68144C17.1237 0.128436 13.0487 0.10559 9.34056 1.61736C5.63237 3.12912 2.73478 5.99438 1.18166 9.68545C-0.371516 13.3765 -0.394244 17.4514 1.11746 21.1596C2.62929 24.8677 5.49466 27.7652 9.18574 29.3183C11.0576 30.1059 13.0277 30.5 14.9991 30.4999C16.9151 30.4998 18.8324 30.1275 20.6601 29.3825C23.4591 28.2413 25.819 26.312 27.4847 23.8031C27.8426 23.264 27.6958 22.5369 27.1567 22.179C26.6176 21.8211 25.8905 21.968 25.5326 22.5071C25.0835 23.1837 24.5743 23.8103 24.0122 24.3812C23.3235 22.9699 22.3024 21.7189 21.0443 20.7658C19.293 19.4389 17.2031 18.7376 15.0006 18.7376C12.8011 18.7376 10.7135 19.4372 8.9635 20.7607C7.7035 21.7137 6.68044 22.9657 5.99052 24.3782C4.86009 23.234 3.93117 21.8546 3.28723 20.275C2.01176 17.1465 2.03098 13.7084 3.34135 10.5942C4.65173 7.48007 7.0964 5.06259 10.2251 3.78712C16.6839 1.15407 24.0804 4.2664 26.7134 10.7249C27.5924 12.8809 27.861 15.2284 27.4901 17.5136C27.3864 18.1522 27.8201 18.754 28.4588 18.8576C29.097 18.9621 29.6993 18.5276 29.8029 17.8889C30.2428 15.1784 29.9248 12.3952 28.8831 9.84022ZM15.0007 21.0806C18.1522 21.0806 21.0002 23.0498 22.1427 25.9427C21.4069 26.4446 20.6147 26.8706 19.7755 27.2127C15.6998 28.8742 11.2508 28.248 7.86089 25.9369C9.00503 23.0477 11.8529 21.0806 15.0007 21.0806Z" fill="#3B3535"></path>
                    <path d="M10.0132 11.4467C10.0132 14.1968 12.2507 16.4342 15.0009 16.4342C17.7511 16.4342 19.9886 14.1968 19.9886 11.4467C19.9886 8.69647 17.7511 6.45905 15.0009 6.45905C12.2507 6.45905 10.0132 8.69647 10.0132 11.4467ZM17.6455 11.4467C17.6455 12.9049 16.4592 14.0912 15.0009 14.0912C13.5427 14.0912 12.3563 12.9049 12.3563 11.4467C12.3563 9.98845 13.5427 8.80214 15.0009 8.80214C16.4592 8.80214 17.6455 9.98851 17.6455 11.4467Z" fill="#3B3535"></path>
                </svg>
                <div class="text">{{__("Профиль")}}</div>
            </div>
            <a class="profileBtn userProfileBtn" href="{{ route('profile.index') }}" style="display: {{ !$isQuest ? 'flex' : 'none' }}">
                <svg width="30" height="31" viewBox="0 0 30 31" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M28.8831 9.84022C27.3714 6.13209 24.506 3.23456 20.8149 1.68144C17.1237 0.128436 13.0487 0.10559 9.34056 1.61736C5.63237 3.12912 2.73478 5.99438 1.18166 9.68545C-0.371516 13.3765 -0.394244 17.4514 1.11746 21.1596C2.62929 24.8677 5.49466 27.7652 9.18574 29.3183C11.0576 30.1059 13.0277 30.5 14.9991 30.4999C16.9151 30.4998 18.8324 30.1275 20.6601 29.3825C23.4591 28.2413 25.819 26.312 27.4847 23.8031C27.8426 23.264 27.6958 22.5369 27.1567 22.179C26.6176 21.8211 25.8905 21.968 25.5326 22.5071C25.0835 23.1837 24.5743 23.8103 24.0122 24.3812C23.3235 22.9699 22.3024 21.7189 21.0443 20.7658C19.293 19.4389 17.2031 18.7376 15.0006 18.7376C12.8011 18.7376 10.7135 19.4372 8.9635 20.7607C7.7035 21.7137 6.68044 22.9657 5.99052 24.3782C4.86009 23.234 3.93117 21.8546 3.28723 20.275C2.01176 17.1465 2.03098 13.7084 3.34135 10.5942C4.65173 7.48007 7.0964 5.06259 10.2251 3.78712C16.6839 1.15407 24.0804 4.2664 26.7134 10.7249C27.5924 12.8809 27.861 15.2284 27.4901 17.5136C27.3864 18.1522 27.8201 18.754 28.4588 18.8576C29.097 18.9621 29.6993 18.5276 29.8029 17.8889C30.2428 15.1784 29.9248 12.3952 28.8831 9.84022ZM15.0007 21.0806C18.1522 21.0806 21.0002 23.0498 22.1427 25.9427C21.4069 26.4446 20.6147 26.8706 19.7755 27.2127C15.6998 28.8742 11.2508 28.248 7.86089 25.9369C9.00503 23.0477 11.8529 21.0806 15.0007 21.0806Z" fill="#3B3535"></path>
                    <path d="M10.0132 11.4467C10.0132 14.1968 12.2507 16.4342 15.0009 16.4342C17.7511 16.4342 19.9886 14.1968 19.9886 11.4467C19.9886 8.69647 17.7511 6.45905 15.0009 6.45905C12.2507 6.45905 10.0132 8.69647 10.0132 11.4467ZM17.6455 11.4467C17.6455 12.9049 16.4592 14.0912 15.0009 14.0912C13.5427 14.0912 12.3563 12.9049 12.3563 11.4467C12.3563 9.98845 13.5427 8.80214 15.0009 8.80214C16.4592 8.80214 17.6455 9.98851 17.6455 11.4467Z" fill="#3B3535"></path>
                </svg>
                <div class="text">{{__("Профиль")}}</div>
            </a>

        </div>
        <div class="basketAt"></div>
    </div>
    {{-- Модальное окно выбора города --}}
    {{-- <div id="cityModal" class="modal" style="display: none;">
    <div class="modal-content">
        <span class="close" onclick="closeCityModal()">&times;</span>
        <h2>Выберите город</h2>
        <div class="city-list">
            @if(!empty($cities) && $cities->count())
                @foreach($cities as $city)
                    <a href="{{ city_route('pages.city.get', ['slug' => $city->slug]) }}">
                        {{ $city->name }}
                    </a>
                @endforeach
            @else
                <p>Список городов пуст.</p>
            @endif
        </div>
    </div>
</div> --}}
<div id="cityModal" class="city-modal" style="display: none;">
    <div class="city-modal__content">
        <span class="city-modal__close" onclick="closeCityModal()">&times;</span>
        <h2 class="city-modal__title">Выберите город</h2>
        <div class="city-modal__list">
            @if(!empty($cities) && $cities->count())
                @foreach($cities as $city)
                    <a href="{{ city_route('pages.city.get', ['slug' => $city->slug]) }}" class="city-modal__item">
                        {{ $city->name }}
                    </a>
                @endforeach
            @else
                <p class="city-modal__empty">Список городов пуст.</p>
            @endif
        </div>
    </div>
</div>

</header>

<div class="mobileMenu_bloor" onclick="closeMobileMenu()"></div>
<div class="mobileMenu">
    <div class="box">
        <div class="link" onclick="closeOnlyMenuOpenCatalog()">
            {{__("Каталог")}}
            <svg xmlns="http://www.w3.org/2000/svg" width="7" height="11" viewBox="0 0 7 11" fill="none">
                <path d="M1 10L5.5 5.5L1 1" stroke="#3B3535" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
        </div>
        <a class="link" href="{{ city_route('calculator.city') }}">{{__("Калькулятор")}}</a>
        <a class="link" href="{{ city_route('about.city') }}">{{__("О компании")}}</a>
        <a class="link" href="{{ city_route('pages.city.get', ['slug' => 'articles']) }}">{{__("Статьи")}}</a>
        <a class="link" href="{{ city_route('contacts.city') }}">{{__("Контакты")}}</a>

        <a class="link" href="{{ route('lang.change', app()->getLocale() === 'ru' ? 'kk' : 'ru') }}">
            {{ app()->getLocale() === 'ru' ? 'Қазақ' : 'Русский' }}
        </a>

        <div class="btn" onclick="closeMobileMenu();showModal(1)">{{__("Заказать звонок")}}</div>

        <a class="tel" href="tel:+{{ $generalSettings->getPhone() }}">{{ $generalSettings->phone }}</a>
    </div>
</div>
@if($categories)
    <div class="mobileCatalog">
        @foreach($categories as $slug => $name)
            <a class="link" href="{{ city_route('category.city.show', ['slug' => $slug]) }}">{{$name}}</a>
        @endforeach
    </div>
@endif
<div class="mobileInteractive">
    <div class="icon">
        <div class="link" onclick="closeOnlyMenuOpenCatalog()">
            <svg xmlns="http://www.w3.org/2000/svg" width="22" height="20" viewBox="0 0 22 20" fill="none">
                <path d="M7.99114 3.25914H20.7142C21.0594 3.25914 21.3393 2.97923 21.3393 2.63396C21.3393 2.2887 21.0594 2.00879 20.7142 2.00879H7.99114C7.64588 2.00879 7.36597 2.2887 7.36597 2.63396C7.36597 2.97923 7.64588 3.25914 7.99114 3.25914Z" fill="#3B3535"></path>
                <path d="M20.7142 9.375H7.99114C7.64588 9.375 7.36597 9.65491 7.36597 10.0002C7.36597 10.3454 7.64588 10.6253 7.99114 10.6253H20.7142C21.0594 10.6253 21.3393 10.3454 21.3393 10.0002C21.3393 9.65491 21.0594 9.375 20.7142 9.375Z" fill="#3B3535"></path>
                <path d="M20.7142 16.7407H7.99114C7.64588 16.7407 7.36597 17.0206 7.36597 17.3659C7.36597 17.7112 7.64588 17.9911 7.99114 17.9911H20.7142C21.0594 17.9911 21.3393 17.7112 21.3393 17.3659C21.3393 17.0206 21.0594 16.7407 20.7142 16.7407Z" fill="#3B3535"></path>
                <path d="M2.63407 0C1.18162 0 0 1.18162 0 2.63407C0 4.08652 1.18166 5.26814 2.63407 5.26814C4.08647 5.26814 5.26814 4.08647 5.26814 2.63407C5.26814 1.18166 4.08652 0 2.63407 0ZM2.63407 4.01779C1.87106 4.01779 1.25035 3.39703 1.25035 2.63407C1.25035 1.87111 1.87111 1.25035 2.63407 1.25035C3.39703 1.25035 4.01779 1.87106 4.01779 2.63407C4.01779 3.39707 3.39707 4.01779 2.63407 4.01779Z" fill="#3B3535"></path>
                <path d="M2.63407 7.36572C1.18166 7.36572 0 8.54734 0 9.99979C0 11.4522 1.18166 12.6339 2.63407 12.6339C4.08647 12.6339 5.26814 11.4522 5.26814 9.99979C5.26814 8.54739 4.08652 7.36572 2.63407 7.36572ZM2.63407 11.3835C1.87111 11.3835 1.25035 10.7628 1.25035 9.99979C1.25035 9.23679 1.87111 8.61607 2.63407 8.61607C3.39703 8.61607 4.01779 9.23683 4.01779 9.99979C4.01779 10.7628 3.39707 11.3835 2.63407 11.3835Z" fill="#3B3535"></path>
                <path d="M2.63407 14.7319C1.18162 14.7319 0 15.9136 0 17.366C0 18.8184 1.18166 20.0001 2.63407 20.0001C4.08647 20.0001 5.26814 18.8184 5.26814 17.366C5.26814 15.9136 4.08652 14.7319 2.63407 14.7319ZM2.63407 18.7497C1.87106 18.7497 1.25035 18.129 1.25035 17.366C1.25035 16.603 1.87111 15.9823 2.63407 15.9823C3.39703 15.9823 4.01779 16.603 4.01779 17.366C4.01779 18.129 3.39707 18.7497 2.63407 18.7497Z" fill="#3B3535"></path>
            </svg>
        </div>
    </div>
    <div class="icon">
        <a class="link" href="{{ city_route('calculator.city') }}">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="20" viewBox="0 0 18 20" fill="none">
                <path d="M14.3957 4.02832C14.3957 3.59684 14.046 3.24707 13.6145 3.24707H4.54199C4.11051 3.24707 3.76074 3.59684 3.76074 4.02832V7.18852C3.76074 7.62 4.11051 7.96977 4.54199 7.96977H13.6145C14.046 7.96977 14.3957 7.62 14.3957 7.18852V4.02832ZM12.8332 6.40727H5.32324V4.80957H12.8332V6.40727Z" fill="#3B3535"></path>
                <path d="M5.24055 9.30225H4.61719C4.1857 9.30225 3.83594 9.65201 3.83594 10.0835C3.83594 10.515 4.1857 10.8647 4.61719 10.8647H5.24055C5.67203 10.8647 6.0218 10.515 6.0218 10.0835C6.0218 9.65201 5.67203 9.30225 5.24055 9.30225Z" fill="#3B3535"></path>
                <path d="M5.24055 12.2461H4.61719C4.1857 12.2461 3.83594 12.5959 3.83594 13.0273C3.83594 13.4588 4.1857 13.8086 4.61719 13.8086H5.24055C5.67203 13.8086 6.0218 13.4588 6.0218 13.0273C6.0218 12.5959 5.67203 12.2461 5.24055 12.2461Z" fill="#3B3535"></path>
                <path d="M5.24055 15.1899H4.61719C4.1857 15.1899 3.83594 15.5397 3.83594 15.9712C3.83594 16.4027 4.1857 16.7524 4.61719 16.7524H5.24055C5.67203 16.7524 6.0218 16.4027 6.0218 15.9712C6.0218 15.5397 5.67203 15.1899 5.24055 15.1899Z" fill="#3B3535"></path>
                <path d="M9.38992 9.30225H8.7666C8.33512 9.30225 7.98535 9.65201 7.98535 10.0835C7.98535 10.515 8.33512 10.8647 8.7666 10.8647H9.38992C9.82141 10.8647 10.1712 10.515 10.1712 10.0835C10.1712 9.65201 9.82137 9.30225 9.38992 9.30225Z" fill="#3B3535"></path>
                <path d="M9.38992 12.2461H8.7666C8.33512 12.2461 7.98535 12.5959 7.98535 13.0273C7.98535 13.4588 8.33512 13.8086 8.7666 13.8086H9.38992C9.82141 13.8086 10.1712 13.4588 10.1712 13.0273C10.1712 12.5959 9.82137 12.2461 9.38992 12.2461Z" fill="#3B3535"></path>
                <path d="M9.38992 15.1899H8.7666C8.33512 15.1899 7.98535 15.5397 7.98535 15.9712C7.98535 16.4027 8.33512 16.7524 8.7666 16.7524H9.38992C9.82141 16.7524 10.1712 16.4027 10.1712 15.9712C10.1712 15.5397 9.82137 15.1899 9.38992 15.1899Z" fill="#3B3535"></path>
                <path d="M14.3204 10.0835C14.3204 9.65201 13.9706 9.30225 13.5391 9.30225H12.9158C12.4843 9.30225 12.1345 9.65201 12.1345 10.0835C12.1345 10.515 12.4843 10.8647 12.9158 10.8647H13.5391C13.9706 10.8647 14.3204 10.515 14.3204 10.0835Z" fill="#3B3535"></path>
                <path d="M12.4463 13.1426V15.9717C12.4463 16.4032 12.7961 16.7529 13.2275 16.7529C13.659 16.7529 14.0088 16.4032 14.0088 15.9717V13.1426C14.0088 12.7111 13.659 12.3613 13.2275 12.3613C12.7961 12.3613 12.4463 12.7111 12.4463 13.1426Z" fill="#3B3535"></path>
                <path d="M16.8957 13.7884C17.3272 13.7884 17.677 13.4387 17.677 13.0072V3.125C17.677 1.40188 16.2751 0 14.552 0H3.60449C1.88137 0 0.479492 1.40188 0.479492 3.125V16.875C0.479492 18.5981 1.88137 20 3.60449 20H14.552C16.2751 20 17.677 18.5981 17.677 16.8744C17.677 16.4429 17.3272 16.0934 16.8957 16.0934C16.4643 16.0934 16.1145 16.4435 16.1145 16.875C16.1145 17.7366 15.4136 18.4375 14.552 18.4375H3.60449C2.74293 18.4375 2.04199 17.7366 2.04199 16.875V3.125C2.04199 2.26344 2.74293 1.5625 3.60449 1.5625H14.552C15.4136 1.5625 16.1145 2.26344 16.1145 3.125V13.0072C16.1145 13.4387 16.4643 13.7884 16.8957 13.7884Z" fill="#3B3535"></path>
            </svg>
        </a>
    </div>
    <div class="icon">
        <a class="link basketBtn" href="{{ city_route('pages.city.get', ['slug' => 'cart']) }}">
            <svg xmlns="http://www.w3.org/2000/svg" width="21" height="20" viewBox="0 0 21 20" fill="none">
                <path d="M20.1334 7.17305V10.1912C20.1334 10.608 19.7957 10.9457 19.3789 10.9457H18.8827L18.5648 13.7748C18.5215 14.1603 18.1949 14.445 17.8159 14.4452C17.7877 14.4452 17.7594 14.4435 17.7307 14.4403C17.3166 14.3939 17.0186 14.0203 17.0652 13.6063L17.4584 10.107C17.5012 9.72535 17.824 9.43666 18.2082 9.43666H18.6245V7.92759H2.32646V9.43666H15.1913C15.6081 9.43666 15.9459 9.77457 15.9459 10.1912C15.9459 10.608 15.6081 10.9457 15.1913 10.9457H3.60063L4.34574 17.1616C4.43652 17.9196 5.08067 18.4911 5.84406 18.4911H15.1673C15.9363 18.4911 16.5811 17.9147 16.667 17.1504C16.7134 16.7363 17.0868 16.4385 17.5009 16.4849C17.9151 16.5315 18.213 16.9049 18.1666 17.319C17.9948 18.8474 16.7054 20.0001 15.1673 20.0001H5.84406C4.31729 20.0001 3.02898 18.857 2.84727 17.3411L2.08079 10.9457H1.57192C1.15516 10.9457 0.817383 10.608 0.817383 10.1912V7.17305C0.817383 6.75629 1.15516 6.41852 1.57192 6.41852H4.24818L8.23529 0.991918C8.48199 0.65621 8.95417 0.583851 9.29003 0.830696C9.62589 1.07739 9.6981 1.54957 9.4514 1.88542L6.12082 6.41852H14.858L11.5273 1.88542C11.2806 1.54957 11.3528 1.07739 11.6886 0.830696C12.0245 0.583851 12.4967 0.656062 12.7435 0.991918L16.7305 6.41852H19.3789C19.7957 6.41852 20.1334 6.75644 20.1334 7.17305ZM9.72094 13.2093V16.2275C9.72094 16.6442 10.0587 16.982 10.4755 16.982C10.8921 16.982 11.23 16.6442 11.23 16.2275V13.2093C11.23 12.7926 10.8921 12.4548 10.4755 12.4548C10.0587 12.4548 9.72094 12.7926 9.72094 13.2093ZM12.7391 13.2093V16.2275C12.7391 16.6442 13.0769 16.982 13.4936 16.982C13.9103 16.982 14.2482 16.6442 14.2482 16.2275V13.2093C14.2482 12.7926 13.9103 12.4548 13.4936 12.4548C13.0769 12.4548 12.7391 12.7926 12.7391 13.2093ZM6.70279 13.2093V16.2275C6.70279 16.6442 7.04056 16.982 7.45732 16.982C7.87394 16.982 8.21186 16.6442 8.21186 16.2275V13.2093C8.21186 12.7926 7.87394 12.4548 7.45732 12.4548C7.04056 12.4548 6.70279 12.7926 6.70279 13.2093Z" fill="#3B3535"></path>
            </svg>
            <div class="num">{{ $cartCount > 9 ? '9+' : $cartCount }}</div>
        </a>
    </div>

    <div class="icon">
            <a class="link questProfileBtn" onclick="showModal(2)" style="display: {{ $isQuest ? 'flex' : 'none' }}">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
                    <path d="M19.2585 6.22495C18.2505 3.75247 16.3399 1.82048 13.8788 0.784903C11.4176 -0.250597 8.70054 -0.26583 6.22802 0.742173C3.75551 1.75018 1.82348 3.66065 0.787901 6.12176C-0.247716 8.58283 -0.262871 11.2999 0.745093 13.7724C1.75314 16.2449 3.66369 18.1769 6.12479 19.2124C7.37292 19.7375 8.68647 20.0003 10.001 20.0002C11.2785 20.0002 12.5569 19.7519 13.7756 19.2552C15.6419 18.4943 17.2154 17.2079 18.326 15.535C18.5647 15.1756 18.4668 14.6908 18.1073 14.4521C17.7479 14.2134 17.2631 14.3114 17.0245 14.6708C16.725 15.122 16.3854 15.5398 16.0107 15.9205C15.5515 14.9795 14.8706 14.1453 14.0318 13.5098C12.8641 12.6251 11.4706 12.1575 10.002 12.1575C8.5354 12.1575 7.14346 12.6239 5.97661 13.5064C5.13648 14.1418 4.45433 14.9766 3.99431 15.9185C3.24057 15.1555 2.62119 14.2358 2.19183 13.1826C1.34139 11.0965 1.3542 8.80413 2.22792 6.7277C3.10164 4.65127 4.73168 3.03936 6.8178 2.18891C11.1244 0.433265 16.0561 2.50848 17.8117 6.8148C18.3978 8.2524 18.5769 9.81764 18.3296 11.3413C18.2605 11.7672 18.5497 12.1684 18.9755 12.2375C19.4011 12.3071 19.8027 12.0174 19.8717 11.5916C20.1651 9.78432 19.953 7.92857 19.2585 6.22495ZM10.002 13.7197C12.1034 13.7197 14.0024 15.0327 14.7641 16.9616C14.2735 17.2963 13.7453 17.5803 13.1858 17.8084C10.4682 18.9163 7.5017 18.4987 5.24142 16.9578C6.0043 15.0313 7.90321 13.7197 10.002 13.7197Z" fill="#3B3535"></path>
                    <path d="M6.67651 7.29632C6.67651 9.13004 8.1684 10.6219 10.0022 10.6219C11.8359 10.6219 13.3278 9.13004 13.3278 7.29632C13.3278 5.46255 11.8359 3.9707 10.0022 3.9707C8.1684 3.9707 6.67651 5.46255 6.67651 7.29632ZM11.7655 7.29632C11.7655 8.26862 10.9745 9.05962 10.0022 9.05962C9.0299 9.05962 8.23886 8.26862 8.23886 7.29632C8.23886 6.32401 9.0299 5.53301 10.0022 5.53301C10.9745 5.53301 11.7655 6.32405 11.7655 7.29632Z" fill="#3B3535"></path>
                </svg>
            </a>
        <a class="link userProfileBtn" href="{{ route('profile.index') }}" style="display: {{ !$isQuest ? 'flex' : 'none' }}">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
                <path d="M19.2585 6.22495C18.2505 3.75247 16.3399 1.82048 13.8788 0.784903C11.4176 -0.250597 8.70054 -0.26583 6.22802 0.742173C3.75551 1.75018 1.82348 3.66065 0.787901 6.12176C-0.247716 8.58283 -0.262871 11.2999 0.745093 13.7724C1.75314 16.2449 3.66369 18.1769 6.12479 19.2124C7.37292 19.7375 8.68647 20.0003 10.001 20.0002C11.2785 20.0002 12.5569 19.7519 13.7756 19.2552C15.6419 18.4943 17.2154 17.2079 18.326 15.535C18.5647 15.1756 18.4668 14.6908 18.1073 14.4521C17.7479 14.2134 17.2631 14.3114 17.0245 14.6708C16.725 15.122 16.3854 15.5398 16.0107 15.9205C15.5515 14.9795 14.8706 14.1453 14.0318 13.5098C12.8641 12.6251 11.4706 12.1575 10.002 12.1575C8.5354 12.1575 7.14346 12.6239 5.97661 13.5064C5.13648 14.1418 4.45433 14.9766 3.99431 15.9185C3.24057 15.1555 2.62119 14.2358 2.19183 13.1826C1.34139 11.0965 1.3542 8.80413 2.22792 6.7277C3.10164 4.65127 4.73168 3.03936 6.8178 2.18891C11.1244 0.433265 16.0561 2.50848 17.8117 6.8148C18.3978 8.2524 18.5769 9.81764 18.3296 11.3413C18.2605 11.7672 18.5497 12.1684 18.9755 12.2375C19.4011 12.3071 19.8027 12.0174 19.8717 11.5916C20.1651 9.78432 19.953 7.92857 19.2585 6.22495ZM10.002 13.7197C12.1034 13.7197 14.0024 15.0327 14.7641 16.9616C14.2735 17.2963 13.7453 17.5803 13.1858 17.8084C10.4682 18.9163 7.5017 18.4987 5.24142 16.9578C6.0043 15.0313 7.90321 13.7197 10.002 13.7197Z" fill="#3B3535"></path>
                <path d="M6.67651 7.29632C6.67651 9.13004 8.1684 10.6219 10.0022 10.6219C11.8359 10.6219 13.3278 9.13004 13.3278 7.29632C13.3278 5.46255 11.8359 3.9707 10.0022 3.9707C8.1684 3.9707 6.67651 5.46255 6.67651 7.29632ZM11.7655 7.29632C11.7655 8.26862 10.9745 9.05962 10.0022 9.05962C9.0299 9.05962 8.23886 8.26862 8.23886 7.29632C8.23886 6.32401 9.0299 5.53301 10.0022 5.53301C10.9745 5.53301 11.7655 6.32405 11.7655 7.29632Z" fill="#3B3535"></path>
            </svg>
        </a>
    </div>
</div>
<script>
document.addEventListener('DOMContentLoaded', () => {

    // Открытие модалки по клику на иконку
    const cityIcon = document.querySelector('.extraIcon');
    const cityModal = document.getElementById('cityModal');

    if (cityIcon && cityModal) {
        cityIcon.addEventListener('click', () => {
            cityModal.style.display = 'flex'; // flex для центрирования
        });
    }

    // Закрытие модалки по клику на крестик
    const closeBtn = cityModal.querySelector('.city-modal__close');
    if (closeBtn) {
        closeBtn.addEventListener('click', () => {
            cityModal.style.display = 'none';
        });
    }

    // Закрытие при клике вне контента модалки
    cityModal.addEventListener('click', (event) => {
        if (event.target === cityModal) {
            cityModal.style.display = 'none';
        }
    });

    // Выбор города
    const cityLinks = cityModal.querySelectorAll('.city-modal__item');

    cityLinks.forEach(link => {
        link.addEventListener('click', (e) => {
            e.preventDefault();
            const citySlug = link.getAttribute('href').split('/').pop(); // выбранный город

            fetch('{{ route("set.city") }}', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'X-CSRF-TOKEN': '{{ csrf_token() }}'
                },
                body: JSON.stringify({ city: citySlug })
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    cityModal.style.display = 'none';

                    // Разбираем текущий URL
                    const urlParts = window.location.pathname.split('/').filter(Boolean);

                    // Заменяем первый сегмент на новый город
                    if (urlParts.length > 0) {
                        urlParts[0] = citySlug;
                    }

                    // Формируем новый путь
                    const newPath = '/' + urlParts.join('/');
                    window.location.href = newPath + window.location.search; // сохраняем query string
                } else {
                    alert('Ошибка при выборе города');
                }
            })
            .catch(err => console.error('Ошибка:', err));
        });
    });
});
</script>


