var floorsTimer,miniTimer,calcArray={typeProject:0,floorCount:1,floors:[{num:1,width:0,height:0,checked:!1}],mirrorOrDoor:[{format:"mirror",width:0,height:0,count:1},{format:"door",width:0,height:0,count:1}],tolshina:[{width:0}],sizes:{cost:0,value:.002535},kladka:.12};function sliderUpdate(){$(".calcSlider").each(((i,a)=>{$(a).slider({orientation:"horizontal",range:"min",min:parseInt($(a).data("min")),max:parseInt($(a).data("max")),value:[$(".inputsWithRadio .calcSliderInput").eq(i).val()],slide:function(a,l){if($(".calcSliderInput").eq(i).val(parseInt(l.value)),$(".calcSliderInput").eq(i).parent().parent().parent().parent().parent().hasClass("floors")){let a=$(".calcSliderInput").eq(i).parent().parent().parent().parent().index()-1;$(".calcSliderInput").eq(i).parent().hasClass("width")&&(calcArray.floors[a].width=parseInt(l.value)),$(".calcSliderInput").eq(i).parent().hasClass("height")&&(calcArray.floors[a].height=parseInt(l.value))}if($(".calcSliderInput").eq(i).parent().parent().parent().parent().parent().hasClass("mirrorOrDoor")){let a=$(".calcSliderInput").eq(i).parent().parent().parent().parent().index();$(".calcSliderInput").eq(i).parent().hasClass("width")&&(calcArray.mirrorOrDoor[a].width=parseInt(l.value)),$(".calcSliderInput").eq(i).parent().hasClass("height")&&(calcArray.mirrorOrDoor[a].height=parseInt(l.value))}$(".calcSliderInput").eq(i).parent().hasClass("tolshina")&&(calcArray.tolshina[0].width=parseInt(l.value))}}),$(".calcSliderInput").eq(i).on("input",(function(l){$(a).slider("value",$(".calcSliderInput").eq(i).val())}))}))}function firstGenerateFloors(){calcArray.floors.length;for(let i=0;i<calcArray.floors.length;i++){calcArray.floors[i];let a=i+1;i>=1?$(".calcPage .floors").append('<div class="box"><div class="box_title">Этаж '+a+'</div><div class="box_item"><div class="box_row left117"><img class="left" src="/images/icons/calc_1.svg" alt=""><div class="inputsWithRadio width"><label>Длина всех стен, мм</label><input class="calcSliderInput" type="number" value="0" min="0"><div class="item-slider"><div class="calcSlider ui-slider ui-corner-all ui-slider-horizontal ui-widget ui-widget-content" data-min="0" data-max="25000"><div class="ui-slider-handle ui-corner-all ui-state-default" tabindex="0" style="left: 0%;"></div><div class="ui-slider-range ui-corner-all ui-widget-header ui-slider-range-min" style="width: 0%;"></div></div></div></div></div><div class="box_row left117"><img class="left" src="/images/icons/calc_2.svg" alt=""><div class="inputsWithRadio height"><label>Высота стен по углам, мм</label><input class="calcSliderInput" type="number" value="0" min="0"><div class="item-slider"><div class="calcSlider ui-slider ui-corner-all ui-slider-horizontal ui-widget ui-widget-content" data-min="0" data-max="10000"><div class="ui-slider-handle ui-corner-all ui-state-default" tabindex="0" style="left: 0%;"></div><div class="ui-slider-range ui-corner-all ui-widget-header ui-slider-range-min" style="width: 0%;"></div></div></div></div></div><div class="box_row left117"><div class="checkbox"><input type="checkbox" id="divNum'+i+'"><label for="divNum'+i+'">Как на предыдущем этаже</label></div></div></div></div>'):$(".calcPage .floors").append('<div class="box"><div class="box_title">Этаж '+a+'</div><div class="box_item"><div class="box_row left117"><img class="left" src="/images/icons/calc_1.svg" alt=""><div class="inputsWithRadio width"><label>Длина всех стен, мм</label><input class="calcSliderInput" type="number" value="0" min="0"><div class="item-slider"><div class="calcSlider ui-slider ui-corner-all ui-slider-horizontal ui-widget ui-widget-content" data-min="0" data-max="25000"><div class="ui-slider-handle ui-corner-all ui-state-default" tabindex="0" style="left: 0%;"></div><div class="ui-slider-range ui-corner-all ui-widget-header ui-slider-range-min" style="width: 0%;"></div></div></div></div></div><div class="box_row left117"><img class="left" src="/images/icons/calc_2.svg" alt=""><div class="inputsWithRadio height"><label>Высота стен по углам, мм</label><input class="calcSliderInput" type="number" value="0" min="0"><div class="item-slider"><div class="calcSlider ui-slider ui-corner-all ui-slider-horizontal ui-widget ui-widget-content" data-min="0" data-max="10000"><div class="ui-slider-handle ui-corner-all ui-state-default" tabindex="0" style="left: 0%;"></div><div class="ui-slider-range ui-corner-all ui-widget-header ui-slider-range-min" style="width: 0%;"></div></div></div></div></div></div></div>')}timerChekerFloor(),sliderUpdate()}function editFloors(){let i=calcArray.floors.length;for(let a=0;a<calcArray.floors.length;a++)$(".calcPage .floors .box").length<i&&($(".calcPage .floors").append('<div class="box"><div class="box_title">Этаж '+i+'</div><div class="box_item"><div class="box_row left117"><img class="left" src="/images/icons/calc_1.svg" alt=""><div class="inputsWithRadio width"><label>Длина всех стен, мм</label><input class="calcSliderInput" type="number" value="0" min="0"><div class="item-slider"><div class="calcSlider ui-slider ui-corner-all ui-slider-horizontal ui-widget ui-widget-content" data-min="0" data-max="25000"><div class="ui-slider-handle ui-corner-all ui-state-default" tabindex="0" style="left: 0%;"></div><div class="ui-slider-range ui-corner-all ui-widget-header ui-slider-range-min" style="width: 0%;"></div></div></div></div></div><div class="box_row left117"><img class="left" src="/images/icons/calc_2.svg" alt=""><div class="inputsWithRadio height"><label>Высота стен по углам, мм</label><input class="calcSliderInput" type="number" value="0" min="0"><div class="item-slider"><div class="calcSlider ui-slider ui-corner-all ui-slider-horizontal ui-widget ui-widget-content" data-min="0" data-max="10000"><div class="ui-slider-handle ui-corner-all ui-state-default" tabindex="0" style="left: 0%;"></div><div class="ui-slider-range ui-corner-all ui-widget-header ui-slider-range-min" style="width: 0%;"></div></div></div></div></div><div class="box_row left117"><div class="checkbox"><input type="checkbox" id="divNum'+i+'"><label for="divNum'+i+'">Как на предыдущем этаже</label></div></div></div></div>'),$(".calcPage .box .checkbox label").click((i=>{let a=$(i.currentTarget).parent().parent().parent().parent().index()-1,l=!$(i.currentTarget).parent().children("input").prop("checked");calcArray.floors[a].checked=l,l&&($(i.currentTarget).parent().parent().parent().children(".box_row").children(".width").children("input").val(calcArray.floors[a-1].width),$(i.currentTarget).parent().parent().parent().children(".box_row").children(".height").children("input").val(calcArray.floors[a-1].height),calcArray.floors[a].width=calcArray.floors[a-1].width,calcArray.floors[a].height=calcArray.floors[a-1].height)}))),$(".calcPage .floors .box").length>i&&$(".calcPage .floors .box").each(((a,l)=>{$(".calcPage .floors .box").length>i&&$(".calcPage .floors .box:last-child").remove()}))}function timerChekerFloor(){floorsTimer=setInterval((()=>{calcArray.floorCount>calcArray.floors.length&&calcArray.floors.push({num:calcArray.floorCount+1,width:0,height:0,checked:!1}),calcArray.floorCount<calcArray.floors.length&&calcArray.floors.splice(calcArray.floorCount,1),editFloors(),sliderUpdate(),floorInputs(),floorSync(),calced(),0==calcArray.typeProject&&$(".kladkaItem").css("display","none"),1==calcArray.typeProject&&$(".kladkaItem").css("display","block")}),1e3)}function mirrorOrDoorTrash(i){let a=$(i).parent().index();calcArray.mirrorOrDoor.splice(a,1),$(i).parent().remove(),console.log(calcArray)}function floorSync(){for(let i=0;i<calcArray.floors.length;i++)calcArray.floors[i].checked&&(calcArray.floors[i].width=calcArray.floors[i-1].width,calcArray.floors[i].height=calcArray.floors[i-1].height,$(".calcPage .floors .box").eq(i).children(".box_item").children(".box_row").children(".width").children("input").val(calcArray.floors[i-1].width),$(".calcPage .floors .box").eq(i).children(".box_item").children(".box_row").children(".height").children("input").val(calcArray.floors[i-1].height))}function floorInputs(){$(".calcPage .floors .box").each(((i,a)=>{$(a).children(".box_item").children(".box_row").children(".inputsWithRadio.width").children("input").keyup((a=>{calcArray.floors[i].width=parseInt(a.currentTarget.value)})),$(a).children(".box_item").children(".box_row").children(".inputsWithRadio.height").children("input").keyup((a=>{calcArray.floors[i].height=parseInt(a.currentTarget.value)}))}))}function firstGenerateMirrorOrDoor(){for(let i=0;i<calcArray.mirrorOrDoor.length;i++){"mirror"===calcArray.mirrorOrDoor[i].format?$(".calcPage .mirrorOrDoor").append('<div class="box_item mirror"><img class="trash" src="/images/icons/redTrash.svg" alt="" onclick="mirrorOrDoorTrash(this)"> <div class="left"> <div class="box_row left117"><img class="left" src="/images/icons/calc_3.svg" alt=""> <div class="inputsWithRadio width"> <label>Длина, мм</label> <input class="calcSliderInput" type="number" value="0" min="0"> <div class="item-slider"> <div class="calcSlider ui-slider ui-corner-all ui-widget ui-widget-content ui-slider-horizontal" data-min="0" data-max="10000"> <div class="ui-slider-handle ui-corner-all ui-state-default" tabindex="0" style="left: 0%;"></div> <div class="ui-slider-range ui-corner-all ui-widget-header ui-slider-range-min" style="width: 0%;"></div></div> </div> </div> </div> <div class="box_row left117"><img class="left" src="/images/icons/calc_4.svg" alt=""> <div class="inputsWithRadio height"> <label>Высота, мм</label> <input class="calcSliderInput" type="number" value="0" min="0"> <div class="item-slider"> <div class="calcSlider ui-slider ui-corner-all ui-widget ui-widget-content ui-slider-horizontal" data-min="0" data-max="10000"> <div class="ui-slider-handle ui-corner-all ui-state-default" tabindex="0" style="left: 0%;"></div> <div class="ui-slider-range ui-corner-all ui-widget-header ui-slider-range-min" style="width: 0%;"></div></div> </div> </div> </div> </div> <div class="right"> <div class="right_x">х</div> <div class="inputsWithRadio count"> <input type="number" value="1" min="1"> </div> </div> </div>'):$(".calcPage .mirrorOrDoor").append('<div class="box_item door"><img class="trash" src="/images/icons/redTrash.svg" alt="" onclick="mirrorOrDoorTrash(this)"> <div class="left"> <div class="box_row left117"><img class="left" src="/images/icons/calc_5.svg" alt=""> <div class="inputsWithRadio height"> <label>Высота, мм</label> <input class="calcSliderInput" type="number" value="0" min="0"> <div class="item-slider"> <div class="calcSlider ui-slider ui-corner-all ui-widget ui-widget-content ui-slider-horizontal" data-min="0" data-max="10000"> <div class="ui-slider-handle ui-corner-all ui-state-default" tabindex="0" style="left: 0%;"></div> <div class="ui-slider-range ui-corner-all ui-widget-header ui-slider-range-min" style="width: 0%;"></div></div> </div> </div> </div> <div class="box_row left117"><img class="left" src="/images/icons/calc_6.svg" alt=""> <div class="inputsWithRadio width"> <label>Длина, мм</label> <input class="calcSliderInput" type="number" value="0" min="0"> <div class="item-slider"> <div class="calcSlider ui-slider ui-corner-all ui-widget ui-widget-content ui-slider-horizontal" data-min="0" data-max="10000"> <div class="ui-slider-handle ui-corner-all ui-state-default" tabindex="0" style="left: 0%;"></div> <div class="ui-slider-range ui-corner-all ui-widget-header ui-slider-range-min" style="width: 0%;"></div></div> </div> </div> </div> </div> <div class="right"> <div class="right_x">х</div> <div class="inputsWithRadio count"> <input type="number" value="1" min="1"> </div> </div> </div>')}sliderUpdate()}function addMirror(){calcArray.mirrorOrDoor.push({format:"mirror",width:0,height:0,count:1}),$(".calcPage .mirrorOrDoor").append('<div class="box_item mirror"><img class="trash" src="/images/icons/redTrash.svg" alt="" onclick="mirrorOrDoorTrash(this)"> <div class="left"> <div class="box_row left117"><img class="left" src="/images/icons/calc_3.svg" alt=""> <div class="inputsWithRadio width"> <label>Длина, мм</label> <input class="calcSliderInput" type="number" value="0" min="0"> <div class="item-slider"> <div class="calcSlider ui-slider ui-corner-all ui-widget ui-widget-content ui-slider-horizontal" data-min="0" data-max="10000"> <div class="ui-slider-handle ui-corner-all ui-state-default" tabindex="0" style="left: 0%;"></div> <div class="ui-slider-range ui-corner-all ui-widget-header ui-slider-range-min" style="width: 0%;"></div></div> </div> </div> </div> <div class="box_row left117"><img class="left" src="/images/icons/calc_4.svg" alt=""> <div class="inputsWithRadio height"> <label>Высота, мм</label> <input class="calcSliderInput" type="number" value="0" min="0"> <div class="item-slider"> <div class="calcSlider ui-slider ui-corner-all ui-widget ui-widget-content ui-slider-horizontal" data-min="0" data-max="10000"> <div class="ui-slider-handle ui-corner-all ui-state-default" tabindex="0" style="left: 0%;"></div> <div class="ui-slider-range ui-corner-all ui-widget-header ui-slider-range-min" style="width: 0%;"></div></div> </div> </div> </div> </div> <div class="right"> <div class="right_x">х</div> <div class="inputsWithRadio count"> <input type="number" value="1" min="1"> </div> </div> </div>')}function addDoor(){calcArray.mirrorOrDoor.push({format:"door",width:0,height:0,count:1}),$(".calcPage .mirrorOrDoor").append('<div class="box_item door"><img class="trash" src="/images/icons/redTrash.svg" alt="" onclick="mirrorOrDoorTrash(this)"> <div class="left"> <div class="box_row left117"><img class="left" src="/images/icons/calc_5.svg" alt=""> <div class="inputsWithRadio height"> <label>Высота, мм</label> <input class="calcSliderInput" type="number" value="0" min="0"> <div class="item-slider"> <div class="calcSlider ui-slider ui-corner-all ui-widget ui-widget-content ui-slider-horizontal" data-min="0" data-max="10000"> <div class="ui-slider-handle ui-corner-all ui-state-default" tabindex="0" style="left: 0%;"></div> <div class="ui-slider-range ui-corner-all ui-widget-header ui-slider-range-min" style="width: 0%;"></div></div> </div> </div> </div> <div class="box_row left117"><img class="left" src="/images/icons/calc_6.svg" alt=""> <div class="inputsWithRadio width"> <label>Длина, мм</label> <input class="calcSliderInput" type="number" value="0" min="0"> <div class="item-slider"> <div class="calcSlider ui-slider ui-corner-all ui-widget ui-widget-content ui-slider-horizontal" data-min="0" data-max="10000"> <div class="ui-slider-handle ui-corner-all ui-state-default" tabindex="0" style="left: 0%;"></div> <div class="ui-slider-range ui-corner-all ui-widget-header ui-slider-range-min" style="width: 0%;"></div></div> </div> </div> </div> </div> <div class="right"> <div class="right_x">х</div> <div class="inputsWithRadio count"> <input type="number" value="1" min="1"> </div> </div> </div>')}function calced(){let i=parseFloat(calcArray.kladka),a=parseFloat(calcArray.sizes.value),l=0,e=0;for(let i=0;i<calcArray.floors.length;i++)l=parseFloat(l+calcArray.floors[i].height)/100,e=parseFloat(e+calcArray.floors[i].width)/100;let r=0,t=0;for(let i=0;i<calcArray.mirrorOrDoor.length;i++)r=parseFloat(r+calcArray.mirrorOrDoor[i].width/100)*calcArray.mirrorOrDoor[i].count,t=parseFloat(t+calcArray.mirrorOrDoor[i].height/100)*calcArray.mirrorOrDoor[i].count;let s=parseInt((e*l*i-r*t*i)/a);$(".calcPage .kirpichShtuk").html(s.format()),$(".calcPage .kirpichPalet").html(parseInt(s/$(".inputPalet").val()).format()),$(".calcPage .kirpichAllCost").html(parseInt(s*calcArray.sizes.cost).format()),$(".calcPage .kirpichWess").html(parseInt(s*$(".calcPage .type .size.radio.active").children("input").data("kg")).format())}function showElements(){0==calcArray.typeProject&&($(".calcPage .type .size.radio").eq(1).css("display","flex"),$(".kladkaItem").css("display","none"),calcArray.kladka=parseFloat($(".calcPage .kladka .inputs .input").eq(0).children("label").data("value")),$(".calcPage .kladka .inputs .input").eq(0).children("input").prop("checked",!0)),1==calcArray.typeProject&&($(".calcPage .type .size.radio").eq(1).css("display","none"),removerClassAll("active",".calcPage .type .size.radio"),$(".calcPage .type .size.radio").eq(0).addClass("active"),calcArray.sizes.cost=parseFloat($(".calcPage .type .size.radio").children("input").val()),calcArray.sizes.value=parseFloat($(".calcPage .type .size.radio").children("input").data("value")),$(".kladkaItem").css("display","block"))}firstGenerateFloors(),$(".calcPage .typeProject .input").each(((i,a)=>{$(a).children("label").click((()=>{calcArray.typeProject=parseInt($(a).children("input").val()),showElements()}))})),$(".calcPage .floorNumber button").click((()=>{calcArray.floorCount=parseInt($(".calcPage .floorNumber input").val())})),$(".calcPage .floorNumber input").keyup((()=>{calcArray.floorCount=parseInt($(".calcPage .floorNumber input").val())})),floorInputs(),firstGenerateMirrorOrDoor(),$(".calcPage .mirrorOrDoor .width input").keyup((i=>{let a=$(i.currentTarget).parent().parent().parent().parent().index();calcArray.mirrorOrDoor[a].width=parseInt($(i.currentTarget).val())})),$(".calcPage .mirrorOrDoor .height input").keyup((i=>{let a=$(i.currentTarget).parent().parent().parent().parent().index();calcArray.mirrorOrDoor[a].height=parseInt($(i.currentTarget).val())})),$(".calcPage .mirrorOrDoor .count input").keyup((i=>{let a=$(i.currentTarget).parent().parent().parent().index();calcArray.mirrorOrDoor[a].count=parseInt($(i.currentTarget).val())})),$(".size.radio").each(((i,a)=>{$(a).hasClass("disabled")&&$(a).children("input").attr("disabled",!0),$(a).hasClass("active")&&(calcArray.sizes.cost=parseFloat($(a).children("input").val()),calcArray.sizes.value=parseFloat($(a).children("input").data("value"))),$(a).click((()=>{$(a).hasClass("disabled")||(removerClassAll("active",".size.radio"),$(a).addClass("active"),$(a).children("input").prop("checked",!0),calcArray.sizes.cost=parseFloat($(a).children("input").val()),calcArray.sizes.value=parseFloat($(a).children("input").data("value")))}))})),$(".calcPage .kladka .input label").each(((i,a)=>{$(a).click((()=>{removerClassAll("active",".calcPage .kladka .left .item"),$(".calcPage .kladka .left .item").eq(i).addClass("active"),calcArray.kladka=parseFloat($(a).data("value"))}))})),$(".calcPage .tolshina input").keyup((i=>{calcArray.tolshina[0].width=parseFloat($(i.currentTarget).val())})),Number.prototype.format=function(i,a){return this.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")},0!=$(".homePage .block3").length&&(miniTimer=setInterval((()=>{let i=parseFloat(.12),a=parseFloat($(".homePage .block3 .size.radio.active").children("input").data("value")),l=0,e=0,r=0,t=0;0!=parseInt($(".homePage .block3 .IWR .se").val())&&(l=parseFloat($(".homePage .block3 .IWR .se").val())),0!=parseInt($(".homePage .block3 .IWR .fi").val())&&(e=parseFloat($(".homePage .block3 .IWR .fi").val())),0!=parseInt($(".homePage .block3 .IWR .th").val())&&(r=parseFloat($(".homePage .block3 .IWR .th").val())),0!=parseInt($(".homePage .block3 .IWR .fo").val())&&(t=parseFloat($(".homePage .block3 .IWR .fo").val()));let s=parseInt((e*l*i-r*t*i)/a);$(".homePage .block3 .kirpichShtuk").html(s.format()),$(".homePage .block3 .kirpichAllCost").html(parseInt(s*calcArray.sizes.cost).format())}),1e3));